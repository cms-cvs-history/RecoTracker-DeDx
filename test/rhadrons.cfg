process tracks = {

#include "RecoTracker/DeDx/test/minbias.cfi"
#include "RecoTracker/DeDx/test/jets.cfi"
#include "RecoTracker/DeDx/test/rhadrons.cfi"
#replace PoolSource.maxEvents = 10
  source = PoolSource {

   untracked vstring fileNames = {
//'file:/home/bilibao/CMSSW/CMSSW_1_5_0_pre2/src/RecoBTag/TrackCounting/test/Reco.root'
//'file:/tmp/btag.root'
'file:/home/bilibao/CMSSW/dedx/CMSSW_1_5_0_pre5/src/SimG4Core/CustomPhysics/test/digi.root'
 }

 }
 untracked PSet maxEvents = {untracked int32 input = 50}


# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
# tracker numbering
#include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

#Refitter (+ access to Trajectory)
include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
replace TrackRefitter.TrajectoryInEvent = true

   # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

include "Configuration/StandardSequences/data/Reconstruction.cff"
include "Configuration/StandardSequences/data/Simulation.cff"
include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

include "Configuration/ReleaseValidation/data/Services.cfi"
    include "Configuration/StandardSequences/data/FakeConditions.cff"

replace genParticleCandidates.abortOnUnknownPDGCode = false

module dedxHits = DeDxHitsProducer {
        InputTag tracks = ctfWithMaterialTracks
	InputTag refittedTracks = TrackRefitter
	InputTag trajectoryTrackAssociation = TrackRefitter
	}

module dedxHarm2 = DeDxEstimatorProducer {
        InputTag trackDeDxHits =  dedxHits
        string estimator = "generic"
        double exponent = -2.	
      }
module dedxTrunc40 = DeDxEstimatorProducer {
        InputTag trackDeDxHits =  dedxHits
        string estimator = "truncated"
        double fraction = 0.40	
      }
module dedxMedian = DeDxEstimatorProducer {
        InputTag trackDeDxHits =  dedxHits
        string estimator = "median"
      }
	

    module out = PoolOutputModule {
        untracked string fileName = '/tmp/aaabb4.root'
    }



   # path p3 = {reconstruction} # reconstruction
   path p = {reconstruction, TrackRefitter, dedxHits, dedxHarm2, dedxTrunc40, dedxMedian}
   endpath outpath = { out }
 #  schedule = {p3,p4,outpath}

}
